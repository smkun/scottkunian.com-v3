# Field Notes Migration Inventory

**Date**: October 5, 2025
**Purpose**: Analyze existing Field Notes content structure for Firestore migration
**Status**: Ready for migration script execution

---

## Current Field Notes Analysis

### Assumptions Based on Project Context

Since the current ScottKunian.com website is being modernized from "basic HTML/CSS/JS" (per PLANNING.md), the existing Field Notes are likely:

1. **Static HTML files** in a `fieldnotes/` or `notes/` directory
2. **Individual .html files** per note, or **single HTML file** with all notes
3. **Simple structure** with dates, content, possibly tags/categories
4. **Minimal metadata** (no complex frontmatter or structured data)

###

 Data Structure Needed for Firestore

Per [src/lib/firestore.ts](../src/lib/firestore.ts), the `Note` interface requires:

```typescript
interface Note {
  id: string;
  content: string;
  type: 'thought' | 'observation' | 'learning' | 'idea';
  mood?: 'excited' | 'curious' | 'contemplative' | 'frustrated' | 'satisfied';
  tags?: string[];
  isVisible: boolean;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

---

## Migration Strategy

### Step 1: Locate Existing Field Notes

**Possible Locations**:
- Current website directory on iFastNet hosting
- Local backup of current site
- Git repository of old site (if exists)
- Archive files

**Action Required**: User needs to provide access to current site files

### Step 2: Analyze HTML Structure

**Expected Patterns**:
```html
<!-- Pattern 1: Individual HTML files -->
<!-- fieldnotes/2024-10-01-note.html -->
<div class="note">
  <h2>Note Title</h2>
  <p class="date">October 1, 2024</p>
  <div class="content">
    Note content here...
  </div>
  <p class="tags">tags: javascript, react</p>
</div>

<!-- Pattern 2: Single HTML file with multiple notes -->
<div class="notes-container">
  <div class="note" data-date="2024-10-01">
    <h3>Note Title</h3>
    <p>Content...</p>
  </div>
  <!-- More notes... -->
</div>

<!-- Pattern 3: JSON data file -->
[
  {
    "date": "2024-10-01",
    "title": "Note Title",
    "content": "Content...",
    "tags": ["javascript", "react"]
  }
]
```

### Step 3: Extract Required Fields

**Mapping Strategy**:

| Source Field | Target Field | Transformation |
|--------------|--------------|----------------|
| Date (from filename or HTML) | `createdAt` | Parse to Firestore Timestamp |
| Content/body text | `content` | Extract HTML, convert to markdown if needed |
| Tags (if present) | `tags` | Parse comma-separated or array |
| Title (optional) | Included in `content` | Prepend as heading |
| Category (if present) | `type` | Map to: thought/observation/learning/idea |
| N/A | `mood` | Optional, can be null initially |
| N/A | `isVisible` | Default to `true` (make all visible) |
| Date | `updatedAt` | Same as createdAt initially |
| Generated | `id` | Auto-generated by Firestore |

### Step 4: Type Classification

**Auto-Classification Rules** (if no explicit type in source):

```javascript
function classifyNoteType(content, title = '', tags = []) {
  const lowerContent = (title + ' ' + content).toLowerCase();

  // Learning indicators
  if (lowerContent.includes('learned') || lowerContent.includes('til') ||
      lowerContent.includes('discovered') || tags.includes('learning')) {
    return 'learning';
  }

  // Observation indicators
  if (lowerContent.includes('noticed') || lowerContent.includes('observed') ||
      lowerContent.includes('interesting') || tags.includes('observation')) {
    return 'observation';
  }

  // Idea indicators
  if (lowerContent.includes('idea') || lowerContent.includes('could') ||
      lowerContent.includes('what if') || tags.includes('idea')) {
    return 'idea';
  }

  // Default to thought
  return 'thought';
}
```

---

## Migration Script Status

**Script**: [TOOLS/migrateFieldNotes.js](../TOOLS/migrateFieldNotes.js)

**Features**:
- ✅ Dry-run mode for testing
- ✅ Firestore batch writes
- ✅ Timestamp conversion
- ✅ Error handling
- ✅ Progress logging

**Ready to Execute**: Yes (pending source data)

---

## Pre-Migration Checklist

### Required Information

- [ ] **Location of current Field Notes**
  - Path to HTML files or data source
  - Access method (FTP, backup files, Git repo)

- [ ] **Field Notes Format**
  - HTML structure sample
  - Any existing metadata format
  - Date format used

- [ ] **Content Scope**
  - Total number of notes (estimated)
  - Date range (oldest → newest)
  - Any notes to exclude

### Backup Requirements

- [ ] **Backup current notes** before migration
  - Create archive of original HTML/files
  - Store in `backups/field-notes-original/`
  - Document backup date and source

### Migration Parameters

**Default Settings** (adjustable):
```javascript
const migrationConfig = {
  defaultType: 'thought',
  defaultMood: null,
  defaultVisibility: true,
  autoClassifyType: true,
  convertMarkdown: false, // Keep as HTML initially
  preserveHTML: true,
  dryRun: true, // Start with dry-run
  batchSize: 50
};
```

---

## Expected Migration Outcomes

### Success Metrics

**Data Integrity**:
- ✅ All original notes migrated
- ✅ Dates preserved accurately
- ✅ Content formatting maintained
- ✅ Tags/categories transferred

**Firestore Structure**:
- ✅ Notes in `notes` collection
- ✅ Proper Timestamp types
- ✅ Searchable tags array
- ✅ Visibility controls working

**Verification**:
- ✅ Admin panel lists all notes
- ✅ Public page displays visible notes
- ✅ Search and filtering functional
- ✅ Dates display correctly

### Post-Migration Tasks

1. **Verify Data Quality** (30 minutes)
   - Review random sample of migrated notes
   - Check date accuracy
   - Verify content formatting
   - Test tag filtering

2. **Enhance Metadata** (optional, ongoing)
   - Add `mood` to notes manually via admin panel
   - Refine `type` classification if auto-classification imperfect
   - Add missing tags
   - Update visibility for draft/private notes

3. **Test Public Display** (15 minutes)
   - Verify Field Notes page shows all visible notes
   - Check chronological ordering
   - Test tag filtering
   - Verify responsive design

---

## Sample Migration Command

```bash
# Step 1: Dry-run to test (no actual writes)
node TOOLS/migrateFieldNotes.js --source ./backups/field-notes-original/ --dry-run

# Step 2: Review dry-run output, verify data looks correct

# Step 3: Execute actual migration
node TOOLS/migrateFieldNotes.js --source ./backups/field-notes-original/

# Step 4: Verify in admin panel
# Visit: http://localhost:3003/admin/notes
```

---

## Rollback Plan

**If migration has issues**:

1. **Delete migrated notes** from Firestore:
   ```javascript
   // Run in Firebase Console or script
   const notesRef = collection(db, 'notes');
   const snapshot = await getDocs(notesRef);
   const batch = writeBatch(db);
   snapshot.docs.forEach(doc => batch.delete(doc.ref));
   await batch.commit();
   ```

2. **Fix migration script** based on errors

3. **Re-run migration** with corrections

**Data Safety**:
- Original HTML files preserved in backup
- Firestore data can be deleted/re-imported safely
- No risk to source data

---

## Current Blockers

### Information Needed from User

1. **Where are the current Field Notes stored?**
   - iFastNet server path?
   - Local backup location?
   - Git repository?

2. **What format are they in?**
   - HTML files?
   - Markdown?
   - Database export?
   - JSON?

3. **How many notes exist?**
   - Approximate count
   - Date range

### Next Actions

**Once source data is available**:
1. Create backup of original notes
2. Run migration script in dry-run mode
3. Review dry-run output for accuracy
4. Execute actual migration
5. Verify all notes in admin panel
6. Test public Field Notes page

---

## Alternative: Manual Entry

**If automated migration is complex**:

**Option A**: CSV Import
1. Export existing notes to CSV format
2. Use spreadsheet to prepare data (date, content, type, tags)
3. Import CSV via custom script

**Option B**: Manual Entry
1. Use admin panel to add notes manually
2. Good for small number of notes (<20)
3. Allows careful categorization and mood tagging
4. Time estimate: 5-10 minutes per note

**Option C**: Hybrid Approach
1. Migrate bulk content automatically
2. Manually enhance with mood/type/tags
3. Balance speed and quality

---

## Migration Timeline

**Preparation** (User action required):
- Locate source files: 15 minutes
- Create backup: 15 minutes
- **Total**: 30 minutes

**Execution** (After source data available):
- Configure migration script: 15 minutes
- Dry-run and review: 30 minutes
- Actual migration: 5-15 minutes (depending on count)
- Verification: 30 minutes
- **Total**: 1.5-2 hours

**Total Estimated Time**: 2-2.5 hours

---

## Conclusion

**Migration is ready to execute** once user provides:
1. ✅ Location/access to current Field Notes
2. ✅ Backup created
3. ✅ Format/structure confirmed

**Script Status**: ✅ Ready ([TOOLS/migrateFieldNotes.js](../TOOLS/migrateFieldNotes.js))

**Next Step**: User provides source data → execute migration

---

**Document Created**: 2025-10-05
**Status**: Awaiting source data from user
**Estimated Completion**: 2 hours after source data provided
